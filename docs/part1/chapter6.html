<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noodp, noimageindex">
    <meta name="googlebot" content="noindex, nofollow">
    <title>第6章：モデリング記法を通じたSnowflakeアーキテクチャの理解 - SnowflakeによるデータモデリングLab</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="../index.html">ホーム</a></li>
            <li><a href="../preface.html">はじめに</a></li>
            <li><a href="index.html">第1部</a></li>
        </ul>
    </nav>

    <div class="container">

        <h1>第6章：モデリング記法を通じたSnowflakeアーキテクチャの理解</h1>
        
        <div class="notice">
            <div class="notice-title">📖 この章について</div>
            <p>この内容は「Data Modeling with Snowflake」の第6章を、省略することなく完全に日本語に翻訳したものです。</p>
        </div>

        <p>本書全体を通じて、リレーショナル図は例をサポートし、言葉だけでは表現できない方法でアイデアを説明するために使用されてきました。さまざまなモデリングスタイルと記法が紹介されてきましたが、モデリングの視覚的なセマンティクスとさまざまな要素およびそのプロパティの徹底的な概要はまだカバーされていません。</p>

        <p>この章では、物理的なSnowflakeデータベースの設計と理解を加速し、概念的な規約を通じて機能的なコンテキストを追加できるようにする完全な視覚的ツールキットを見ていきます。シンプルで実用的なアプローチを使用することで、あらゆる背景のユーザーが、自分のニーズに最も適した詳細レベルでデータベーススキーマを表示および探索できます。</p>

        <h2>この章では、以下の主なトピックを扱います：</h2>

        <ul>
            <li>モデリングスタイルと記法の歴史を振り返る</li>
            <li>リレーショナルモデルとその視覚的表現の関係を理解する</li>
            <li>さまざまなタイプのエンティティを描写する方法を学ぶ</li>
            <li>物理レベルと概念レベルで関係を表現する方法を探る</li>
            <li>物理テーブルを超えて機能的なコンテキストを追加する方法を理解する</li>
            <li>さまざまなモデリング規約をシンプル化して、同期されたモデリング実践に到達する方法を発見する</li>
            <li>技術ユーザーとビジネスユーザーの両方にとってアクセスしやすい方法ですべてを行う</li>
        </ul>

        <h2>リレーショナルモデリングの歴史</h2>

        <p>本書全体の図と例は、データベースの概念と構造を説明するためにリレーショナルモデリングに依存しています。リレーショナル図を解析してコミュニケーションする方法を学ぶことは、データベースユーザーに二面的な利益をもたらします。複雑なデータベースランドスケープを迅速に視覚化して実現できるようにし、視覚的な認知補助を使用してゼロから設計できるようにします。しかし、これらの利点にもかかわらず、多くのデータベースユーザーは、モデリングを現代のウェアハウスでは関連性のない秘術的な実践と見なし、それが実際に時間を節約する恩恵であるにもかかわらず、雑用と間違えています。</p>

        <p>データモデリングの実践とそれに関連する記法は、最終的な標準が出現することなく多くの変更と分岐するトレンドを経てきており、普遍的な採用を妨げています。概念データモデルは、Charles Bachmanが最初に長方形を使用してレコードタイプを示し、矢印を使用してそれらの間の関係を形成した1960年代にさかのぼります。10年の終わりに向けて、Edgar F. Coddはリレーショナルモデル（RM）を形式化し、今日私たちが知っているリレーショナルデータベースを生み出しました。RMを使用して、Coddは数学理論を、一階述語論理の構造と言語と一致してデータベースシステムに結び付けることに成功しました。残念ながら、Coddはモデルの視覚的な側面にはあまり関心がなく、図の作成ガイドラインを提供しませんでした。</p>

        <p>70年代には、Peter ChenやRichard Barkerなどのコンピューター科学者が、Bachmanの単純なモデリング規約を拡張して、基礎となるエンティティと関係により多くのコンテキストを含めました。</p>

        <p>しかし、これらの設計のいずれも、広範囲にわたる採用を正当化するほど説得力がありませんでした。これらの設計の単一の要素は、カーディナリティを記述するためのカラスの足記法の使用など、普及しましたが、どの1つの図表スタイルへの完全な準拠も、読みやすさと技術的な詳細のバランスを取ることができなかったため、広範囲にわたる採用には制限が多すぎることが証明されました。ChenのオリジナルのER形式を含む一部は、おそらくどちらも達成していません。</p>

        <p>Chen記法での次の図は、4つのエンティティとその属性で構成される単純なRMを記述しようとしています。しかし、圧倒的な数の視覚要素のために効果的にそうすることができません。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_001.jpg" alt="図6.1 – Chen記法でのER図" style="max-width: 100%; height: auto;">
            <figcaption>図6.1 – Chen記法でのER図</figcaption>
        </figure>

        <p>視覚的な図を効果的に使用するには、モデル（構造）とその表現（図）を分離することが不可欠です。データモデルの視覚的表現は、抽象化のレベルに応じて異なる場合がありますが、それが表す要素は、再解釈の対象ではない実世界のビジネスエンティティに対応しています。</p>

        <h3>RMとエンティティ関係図</h3>

        <p>RMは、ビジネス関連の概念から識別され、属性、識別子、および関係を含むデータベーススキーマにマッピングできることを思い出してください。エンティティ関係図（ERD）は、シンプルで理解しやすいセマンティクスを使用したRMの視覚的なレンダリングです。</p>

        <p>次の例では、第1章「モデリングの力を解き放つ」からリレーショナルエンティティのセットを再訪します。RMでは、3つのエンティティのそれぞれが主キーで識別され、外部キーを通じて他のエンティティに関連付けられたテーブルに対応しています。テーブル名やデータプレビューを観察するだけでは、次のRMで見られるように、これらの関係を判断するのは簡単ではありません：</p>

        <pre>
SUPERHERO
---------
SUPERHERO_NAME|BIRTHPLACE   |SUPERHERO_TYPE|HAS_MASK|
--------------+-------------+--------------+--------+
Ratman        |Gotham Gutter|Accident      |true    |
Razor Tooth   |Amazonia     |Accident      |false   |
Galactoid     |Krab Nebula  |Alien         |true    |

SUPERHERO_TYPE
--------------
SUPERHERO_TYPE|
--------------+
Accident      |
Tech Soldier  |
Vigilante     |
Alien         |

COMIC_BOOK
----------
COMIC_BOOK_NAME               |ISSUE_DATE|
------------------------------+----------+
BC Comics v4                  |1978-04-03|
Tales from the Underground v3 |1985-12-23|
Tales from the Underground v24|1995-07-15|
BC Comics v103                |2015-06-19|

APPEARED_IN
-----------
COMIC_BOOK_NAME               |SUPERHERO_NAME|
------------------------------+--------------+
BC Comics v4                  |Razor Tooth   |
Tales from the Underground v3 |Ratman        |
Tales from the Underground v24|Ratman        |
Tales from the Underground v24|Razor Tooth   |
BC Comics v103                |Galactoid     |
        </pre>

        <p>しかし、ERDは、提示されているデータの背後にあるテーブルの関連コンテキストを迅速に焦点に当てることで、強調表示します。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_002.jpg" alt="図6.2 – カラスの足関係記法を使用した物理モデル" style="max-width: 100%; height: auto;">
            <figcaption>図6.2 – カラスの足関係記法を使用した物理モデル</figcaption>
        </figure>

        <p>図6.2のERDの視覚的な手がかりのおかげで、COMIC_BOOKとSUPERHEROの間の多対多（M:M）関係など、データの背後にあるコンテキストが即座に焦点に入ります。つまり、視聴者がERDが使用している視覚的なセマンティクスに精通している場合です。そこで、これらの要素を詳しく見て、いくつかの視覚的な規約を使用して、技術的および概念的なモデリング規約の幅広い配列を表現する方法を示しましょう。</p>

        <h2>視覚的モデリング規約</h2>

        <p>この章では、本書の残りの部分で使用されるすべてのセマンティック要素を強調表示します。前述のように、モデリング図を描くための固定された普遍的に規定された標準は存在しません。ここで使用される規約とそれに付随する視覚的なセマンティクスは、モデリングの概念と記法の幅広いスペクトルを、それらを表すために最も広く使用されている記号を使用して、コアな要素のセットに単純化しようとする著者の試みです。この本の視覚的なセマンティクスは、単一のモデリング記法に準拠するものではなく、いくつかの主要な業界標準から自由に借用しています。目的は、技術的なデータベースの詳細を正確に反映するのに十分正確で、ビジネスユーザーが技術仕様を超えたビジネスコンテキストを理解するのに十分シンプルなモデリング言語を提供することです。</p>

        <p>概念モデル、論理モデル、物理モデルを分離し、ユーザーに一方を他方に変換して適応させることを強制する教科書とは異なり、この本では、モデリングプロセス全体を通じて3つすべてを同期させることを可能にする規約を使用します。このアプローチは、開発が展開するにつれてモデルを一貫して維持するために必要な労力を最小限に抑え、さまざまな抽象化レベルで一貫したビューを提供します。</p>

        <p>それを念頭に置いて、データモデルの中心的な要素であるエンティティを記述するために使用される記法から始めましょう。</p>

        <h3>エンティティの描写</h3>

        <p>モデリングの初期の頃から、エンティティは長方形を使用して描写されてきました。エンティティ名以外に追加の詳細がない概念図に表示される場合でも、属性、データ型、その他の情報のリストを含む物理図に表示される場合でも、エンティティは常に長方形として表されます。</p>

        <p>ただし、モデリングセマンティクスは強いエンティティと弱いエンティティを区別します。エンティティを考えるとき、私たちは一般的に強いエンティティ（主キーによって識別される）を考えます。ただし、弱いエンティティは独立して存在することができず、それらを識別するのに役立つ別のテーブルの属性に依存します。弱いエンティティは、含まれている情報が単独では意味をなさないため、主キーの一部として外部キーを使用する必要があります。このダイナミクスは、図6.3のSIDEKICK弱エンティティテーブルで観察でき、強いエンティティSUPERHEROとの関係でのみ存在できます。</p>

        <p>次の図は、強いエンティティSUPERHEROと弱いエンティティAPPEARED_INを示しています：</p>

        <figure>
            <img src="../images/chapter6/B19467_06_003.jpg" alt="図6.3 – 図中の強いエンティティタイプと弱いエンティティタイプ" style="max-width: 100%; height: auto;">
            <figcaption>図6.3 – 図中の強いエンティティタイプと弱いエンティティタイプ</figcaption>
        </figure>

        <p>図では、エンティティは長方形として描写され、そのコーナーは強いまたは弱い性質を描写します。強いエンティティは直線的で垂直なコーナーで示され、弱いエンティティは丸みを帯びたコーナーを使用します。</p>

        <p>では、エンティティ内の詳細にズームインしてみましょう。論理モデリングと物理モデリングでは、エンティティには属性、制約、およびデータ型に関する詳細が含まれます。次の図は、エンティティ内の詳細が何を表すかを説明しています。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_004.jpg" alt="図6.4 – エンティティの詳細の説明" style="max-width: 100%; height: auto;">
            <figcaption>図6.4 – エンティティの詳細の説明</figcaption>
        </figure>

        <p>エンティティの描き方がわかったので、それらの関係を表現する方法を学びましょう。</p>

        <h3>関係の描写</h3>

        <p>エンティティ間の関係は、接続線として表されます。ただし、関係は実線が捉えることができるよりも多くのコンテキストを伝えることができます。関係線は、関連するエンティティ間のカーディナリティと依存関係に関する情報も中継できます。これらの詳細の一部は物理データベースに完全にマップされ、他の部分は概念的で指向的です。この本では、コンテキストに応じて関係を表すために2つの記法を使用します。それらを理解するために、2つのうちより一般的なカラスの足から始めて、それが粒度をどのように描写するかを発見しましょう。</p>

        <h3>カラスの足記法</h3>

        <p>カラスの足記法は、カラスの足に似た3本の足を持つ多数記号からその名前を派生しています。カラスの足コネクタの各側は、関係のカーディナリティとオプション性に関する情報を表示します。</p>

        <p>2つのカーディナリティオプション（1つまたは多数）と2つのオプション性インジケーター（必須またはオプション）があります。これにより、次の図で説明されているように、4つの可能な組み合わせが得られます：</p>

        <figure>
            <img src="../images/chapter6/B19467_06_005.jpg" alt="図6.5 – カラスの足関係タイプ" style="max-width: 100%; height: auto;">
            <figcaption>図6.5 – カラスの足関係タイプ</figcaption>
        </figure>

        <p>論理/概念モデリングでは、コンテキストを追加するために関係名（ロール名とも呼ばれる）を指定できます。カーディナリティを指定するときは、関係の両端に適用されることを覚えておいてください。つまり、次の例に示すように、関係はどちらの方向にも読むことができます：</p>

        <figure>
            <img src="../images/chapter6/B19467_06_006.jpg" alt="図6.6 – カラスの足関係の読み方" style="max-width: 100%; height: auto;">
            <figcaption>図6.6 – カラスの足関係の読み方</figcaption>
        </figure>

        <p>図は、エンティティからロール名、その遠い側のコネクタ、他のエンティティまで読み取られます。次の例を取ります：</p>

        <ul>
            <li>スーパーヒーローは1つのスーパーヒータイプのみを持つ</li>
            <li>スーパーヒータイプは1つまたは多くのスーパーヒーローによって持たれる</li>
        </ul>

        <p>カラスの足記法を使用して、データベースモデラーはエンティティ関係の最小および最大粒度の機能的な詳細をキャプチャできます。ただし、カラスの足のカーディナリティは物理設計に1対1でマップされません。物理モデルに技術的な精度が必要な場合は、IDEF1X記法が推奨されます。</p>

        <h3>IDEF1X記法</h3>

        <p>IDEF1X（正しくはアイ・デフ・ワン・エックスと発音されますが、しばしばアイ・ディー・フィックスに短縮されます）記法は、1970年代に米国空軍によって発明されました。IDEF1Xの魅力は、物理的なデータベース構造にどれだけ密接にマップされるかです。IDEF1X記法で定義されたエンティティと関係は、明確にSQLに変換でき、その逆も可能です。</p>

        <div class="notice">
            <div class="notice-title">注意</div>
            <p>IDEF1X標準には特定の接続関係構文（例：P、Z、n、n-m）が含まれていますが、この構文は読みやすくなく、広く使用されていません。</p>
        </div>

        <p>カーディナリティの代わりに、IDEF1X記法は関係の強いまたは弱いエンティティの性質に焦点を当てています。強いエンティティ関係は点線で描写され、非識別と呼ばれます。弱いエンティティへの関係は実線を使用し、一意のインスタンスを識別するために強いエンティティからの主キーを必要とするため、識別と呼ばれます。</p>

        <p>IDEF1X記法は物理的なデータベースプロパティに結び付けられているため、データベースによって直接サポートされるオプション性オプションに制限されます。非識別FKが子エンティティでnull可能な場合、コネクタの親エッジは円ではなくダイヤモンドとして表示されます。</p>

        <p>次の図では、弱いエンティティAPPEARED_IN（対応する丸みを帯びたコーナーで表示）が実線を使用して強いエンティティに接続します。デモンストレーションのために、SUPERHEROのSUPERHERO_TYPE FKがnullを受け入れるように変更されたため、SUPERHERO_TYPEエッジがダイヤモンド記号を取ります。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_007.jpg" alt="図6.7 – IDEF1X記法を使用した物理モデル" style="max-width: 100%; height: auto;">
            <figcaption>図6.7 – IDEF1X記法を使用した物理モデル</figcaption>
        </figure>

        <p>エンティティと関係をカバーしたので、M:M関係やサブタイプなど、図に表示される可能なコンテキストを拡張しましょう。</p>

        <h2>Snowflakeアーキテクチャに概念的コンテキストを追加する</h2>

        <p>第2章「4つのモデリングタイプの紹介」での論理モデリングの概要では、M:M関係やサブタイプなどの概念を紹介しました。M:M関係は、中間の関連テーブルなしに物理データベースで作成できないため、特殊です。サブタイプも、エンティティクラスの継承の原則を具現化するため、単なる子テーブルを超えた特別な意味を持ちます。このコンテキストが物理データベースで失われないようにするために、それらを記述する論理モデリング規約が存在します。</p>

        <p>これらの概念を拡張し、M:M関係から始めて、それらを表示するための利用可能なオプションを理解しましょう。</p>

        <h3>多対多関係</h3>

        <p>カラスの足記法は理論上M:M関係を許可しますが、実際には、アプローチには1つの重要な制限があります。モデラーが概念/論理モデルを物理モデルと同期させることができなくなります。</p>

        <p>次の関係は、関連テーブルを使用せずに物理データベースで作成することは不可能であることを思い出してください。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_008.jpg" alt="図6.8 – 2つのテーブル間のM:M関係" style="max-width: 100%; height: auto;">
            <figcaption>図6.8 – 2つのテーブル間のM:M関係</figcaption>
        </figure>

        <p>ただし、Chen記法から関係ダイヤモンドを協力して関連テーブルを表すことで、必要なコンテキストをモデル内に保持しながら、物理モデルと概念モデルを同期させることができます。</p>

        <p>次の図は、物理モデルと論理モデルの両方で同じM:M関係を示しています。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_009.jpg" alt="図6.9 – 物理モデルと論理モデル間で同期されたM:M関係" style="max-width: 100%; height: auto;">
            <figcaption>図6.9 – 物理モデルと論理モデル間で同期されたM:M関係</figcaption>
        </figure>

        <p>M:M関係のコンテキストを保持し、論理モデルと物理モデル全体で同期させる方法がわかったので、サブタイプの記法を分解しましょう。</p>

        <h3>サブタイプとスーパータイプの表現</h3>

        <p>第2章「4つのモデリングタイプの紹介」では、サブタイプが論理図で継承を表すためにどのように使用されたかを見ました。次の図に示すように、SUPERHEROエンティティが4つのサブタイプを持つことができる例を思い出してください。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_010.jpg" alt="図6.10 – 識別子記号を使用して表示された4つのスーパーヒーローサブタイプ" style="max-width: 100%; height: auto;">
            <figcaption>図6.10 – 識別子記号を使用して表示された4つのスーパーヒーローサブタイプ</figcaption>
        </figure>

        <p>図は、4つのテーブルをSUPERHEROのサブタイプとして識別するだけでなく、サブタイプの性質についてのコンテキストも提供します。それが完全（二重平行線）かつ排他的（中央の文字X）であることです。これらのプロパティとそれらを示す方法を理解しましょう。</p>

        <p>サブタイプ関係には、その性質を記述する2つのバイナリプロパティがあります：</p>

        <ul>
            <li><strong>完全/不完全</strong>：すべてのサブタイプが既知であるか、将来さらに追加できるかをそれぞれ示します。前の図は、4つのスーパーヒータイプすべてが存在するため、完全な関係の例です。</li>
            <li><strong>包含/排他</strong>：スーパータイプが複数のサブタイプとして存在できるかどうかを示します。スーパーヒーローは4つのサブタイプのうち1つにしか属することができないため、関係は排他的です。</li>
        </ul>

        <p>これらのプロパティは、IEとIDEF1X記法の組み合わせを使用して表示できます。中央の識別子アイコンは、円または文字Dを反時計回りに90度回転させたものとして表示できます。定義要素は、排他的な関係を示すために中央を通る文字Xと、完全と不完全をそれぞれ記述するための下部の単一または二重線です。4つの構成は次の図で見ることができます：</p>

        <figure>
            <img src="../images/chapter6/B19467_06_011.jpg" alt="図6.11 – 識別子記号の4つの可能な構成" style="max-width: 100%; height: auto;">
            <figcaption>図6.11 – 識別子記号の4つの可能な構成</figcaption>
        </figure>

        <p>物理データベースを図に描写する方法と、物理データベースが保存できるものを超えて視覚的なコンテキストを拡張する方法をカバーしたので、章の最初に提示した主な課題（モデルを同期させること）をどのように活用できるかを考えてみましょう。</p>

        <h2>同期モデリングの利点</h2>

        <p>この章全体を通じて、データモデルを記述し、SQLに厳密な相関関係を持たない可能性のある詳細をキャプチャする図の例を見てきました。モデリングをそのコアコンポーネントに単純化することで（その多くは、データベース設計の正式な背景を持たない人々でも理解される可能性が高い）、モデリングがデータベースチームだけに限定されないことを保証します。思い出すように、モデルはデータベースだけでなく、ビジネス自体も記述します。</p>

        <p>物理モデルと概念モデルを同期させることは、基礎となる物理要素が同じままであるため、モデルをいつでもさまざまな抽象化レベルで表示できるという別の利点を提供します。ユーザーは、より詳細が必要な場合は物理レベルでモデルを表示し、より抽象的に表示したい場合は概念ビューに切り替えることができます。</p>

        <p>これを説明するために、図6.2のさまざまな図が並べて表示され、分析を実行するために必要に応じて物理要素と概念要素を組み合わせて一致させる方法を示しています。</p>

        <figure>
            <img src="../images/chapter6/B19467_06_012.jpg" alt="図6.12 – 概念、論理、物理モデルの要素を並べて表示" style="max-width: 100%; height: auto;">
            <figcaption>図6.12 – 概念、論理、物理モデルの要素を並べて表示</figcaption>
        </figure>

        <p>モデル全体でエンティティを一貫して保つことは、モデルを一貫して保つために他のメンテナンスが必要ないという追加の利点をもたらします。詳細レベルを変更することで、あるスタイルを別のスタイルに適応させるための変換や再作業は必要ありません。</p>

        <p>モデリング記法がどのように進化したか、そしてシンプルで使いやすく読みやすいスタイルで最も関連性があり価値のある要素を活用する方法を見たので、この章の実用的なポイントを確認しましょう。</p>

        <h2>まとめ</h2>

        <p>この章では、リレーショナルモデリングの歴史と、設計を視覚化するために使用されてきたさまざまな記法スタイルを振り返りました。これらのモデリングスタイルの最も簡単で実用的なセマンティクスに焦点を当てることで、データベース設計の正式な背景を持たない人々でも理解できるほどシンプルでありながら、技術的な精度を保つ実用的なアプローチにゼロインすることができました。この本で提案されているモデリング技術は、概念、論理、物理モデル全体でエンティティの数を同期させ、手作業を節約し、詳細レベルに関係なく誰でも同じモデルを表示できるようにします。</p>

        <p>モデリング規約の統合リストを使用して、可能な限り最も簡単な方法でリレーショナル図にエンティティを表示する方法を見ました。次に、関係記法と、データベースモデリングで最も人気のある2つの規約（カラスの足とIDEF1X）を使用して、単純な線を超えて伝えることができる追加のコンテキストをカバーしました。前者はエンティティ間の粒度の詳細を伝えるのに理想的であり、後者は物理モデルに正確にマップする簡略化されたスタイルを使用します。</p>

        <p>また、物理モデルが表示できるものを超えて、サブタイプやM:M関係などの概念/論理モデリング規約を通じて機能的なコンテキストを追加する方法も学びました。</p>

        <p>モデリングツールキットでセマンティック要素を使用する方法を学び、前の章でSnowflakeアーキテクチャとオブジェクトをマスターしたので、概念モデリングから始めて、モデリングの旅を本格的に開始する準備ができています。次の章では、概念モデリングプロセスを、機能チームと技術チーム間のギャップを埋める単純で反復可能なステップに分解し、ビジネスプロセスを効果的にコミュニケーションしてデータベース設計に変換できるようにします。</p>

        <nav class="chapter-nav">
            <a href="chapter5.html" class="prev">← 第5章：Snowflakeオブジェクトを通じたモデリング</a>
        </nav>
        
        <footer>
            <p>個人学習用コンテンツ | 最終更新: 2025年06月25日</p>
        </footer>
    </div>
</body>
</html>