<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>第2章：4つのモデリングタイプ入門 - Data Modeling with Snowflake 日本語版</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="../index.html">ホーム</a></li>
            <li><a href="../preface.html">はじめに</a></li>
            <li><a href="index.html">第1部</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1>第2章：4つのモデリングタイプ入門</h1>
        
        <div class="notice">
            <div class="notice-title">📖 この章について</div>
            <p>この内容は「Data Modeling with Snowflake」の第2章を、省略することなく完全に日本語に翻訳したものです。</p>
        </div>

        <p>前章では、モデルを現実の選択的な簡略化という概念として紹介しました。ハリー・ベックのチューブマップがロンドンの地下鉄システムのナビゲーション専用に設計されたように、地理の異なる側面を説明するために、ストリートマップや地形図などの他のマップバリエーションが存在します。同じことが、データベースとそれらに依存してビジネスオペレーションや分析を可能にする組織にも当てはまります。</p>

        <p>多くの人はモデリングを単にデータベースの文書化、つまりダイアグラムの作成と考えています。しかし、モデリングはテーブルやデータベースをはるかに超えて、開発者がビジネスを理解するのを助けるだけでなく、ビジネスが自分自身を理解するのにも役立ちます。</p>

        <p>組織は、組織図からネットワーク図まで、さまざまなモデルとモデリングスタイルを使用して、多くの複雑さをナビゲートします。これらのどれも完璧なマップを提供するものではありませんが、いくつかは適切な仕事に適したマップとして機能します。本章では、ビジネスとそのデータ資産をさまざまな詳細レベルでマッピングおよびナビゲートするために使用されるモデリングタイプを探求します。</p>

        <p>これらのモデリングタイプのそれぞれに専用の章がありますが、ここでの意図は、詳細に進む前に、各プロセスがどこで、なぜ使用されるかを理解することです。</p>

        <p>本章では、以下の主要なトピックをカバーします：</p>

        <ul>
            <li>モデリングをフローに分解する</li>
            <li>モデリング要素を使用してビジネスチームとのコミュニケーションのための共通言語を見つける方法</li>
            <li>概念モデリングでビジネスモデルをデータモデルに整合させる</li>
            <li>論理モデリングでデータベースオブジェクトを超えてビジネス概念を拡張する</li>
            <li>論理モデルを物理モデルに変換してデータベース設計のブループリントを作成する</li>
            <li>変換モデリングを使用して抽出、ロード、変換（ELT）パイプラインを作成および管理する</li>
        </ul>

        <h2>設計とプロセス</h2>

        <p>長年にわたり、モデリングとデータベースシステムの設計に関する多くの書籍が書かれてきました。しかし、これらの書籍の多くは、密接に関連している技術性と実用性の間の関連付けに失敗しています。多くの場合、モデリングの書籍は完全性を優先し（例えば、関係を表現する4つの異なる記法を説明するなど）、使いやすさを無視します（例えば、どの記法がビジネスユーザーにとって最もアクセスしやすいか？）。</p>

        <p>データベースシステムの最も重要な複雑さは技術的なものではありません。それはビジネスモデル自体、つまりビジネス内の相互作用とそれらを支配するルールです。ビジネスモデルがデータモデルと整合していない場合、データベースは繰り返し調整を強いられます（その過程で組織の信頼とリソースを失いながら）。</p>

        <p>必要なのは、開発者がデータベースランドスケープを構築および文書化するために使用する、ビジネスで読みやすい言語です。</p>

        <h2>ユビキタスモデリング</h2>

        <p>データ構造を定義する前に、それらを生成するビジネスモデルを理解する必要があります。そのようなモデルは、ビジネスプロセスと整合し、変化を予測できるデータベースシステムを構築することを可能にします。木を見て森を見るように、ユビキタスモデリングによって、データのためのビジネスを見ることができます。</p>

        <p>ビジネスには多くの層があります：企業の精神を定義するミッションステートメントから、販売取引、それらをサポートする物流、データ、メタデータ、分析などまで。しかし、ほとんどの人がモデルを考えるとき、データ層だけに焦点を当てる傾向があり、孤立したデータは物語の一部しか語らないことを忘れています。</p>

        <p>実際には、モデリングプロセスには、管理、ビジネス部門、データチーム、アナリストを含む組織全体のチームが関与します。技術的な背景やドメインの専門知識に関係なく、組織内のすべての人が何らかの能力でモデリングに取り組みます（たとえそれが閲覧者の役割であっても）。モデリング時にスキルセットの差異を見失わないようにし、手元のタスクに必要なすべての情報を含みながら、可能な限りシンプルに保つようにしてください。</p>

        <p>次の図は、より広いビジネスコンテキスト内でデータモデリングとして一般的に考えられているものを示しています：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_01.jpg" alt="図2.1 – モデリングが実際に行われるビジネスレイヤー" style="max-width: 100%; height: auto;">
            <figcaption>図2.1 – モデリングが実際に行われるビジネスレイヤー</figcaption>
        </figure>

        <div class="box">
            <h3>データのみに依存する、警告の物語</h3>
            <p>管理チームがすべてのビジネスデータを処理するモデルを構築するように依頼します。サンプルデータ{0,3,6,9}を提供し、あなたが何を構築しているかを理解するために協力できると言います。好きなだけ（はい/いいえ）の質問をしてください。</p>
            <p>Q. 12はセットに含まれますか？ はい。</p>
            <p>Q. 21はセットに含まれますか？ はい。</p>
            <p>素晴らしい、あなたは数字を理解し、3の倍数を処理するモデルを構築します。</p>
            <p>翌日、-1が到着し、ビジネスセットがすべての整数のセットであるため、あなたのモデルが壊れます。</p>
        </div>

        <p>1960年代後半に始まり現在まで発展してきたモデリングとモデリング記法は、頻繁に変化してきました：ピーター・チェン、チャールズ・バックマン、リチャード・バーカーによる最初の同名の設計から始まり、Meriseなどの国家標準、IDEF1X、情報工学（IE）、統一モデリング言語（UML）などの業界標準まで。多くの記法があり、明確な勝者はなく、仲裁する標準的な統治機関もありません。多くの人が混乱するのも不思議ではありません。</p>

        <p>以下は、さまざまな標準を使用したデータモデルのコラージュです：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_02.jpg" alt="図2.2 – モデリング記法の例" style="max-width: 100%; height: auto;">
            <figcaption>図2.2 – モデリング記法の例</figcaption>
        </figure>

        <p>本書はモデリングの百科事典として意図されていません。効率性、一貫性、スケーラビリティを確保するために、Snowflakeでモデリング概念を適用するための実用的なガイドとして意図されています。この章と今後の章では、以下の原則に従って、データエンジニア、開発者、アナリスト、ビジネスユーザーにとってモデリングをアクセスしやすくする、最も理解しやすく簡潔な記法を採用します：</p>

        <ul>
            <li>KISS（Keep It Simple Stupid）の原則：モデリング（人生と同様）では、最もシンプルなアプローチが最良のアプローチであることが多い</li>
            <li>簡潔であること</li>
            <li>曖昧さをなくす：同じ慣習に2つの意味を与えない</li>
            <li>業界標準を受け入れる：理解を促進する場合</li>
            <li>業界標準を破る：使いやすさを優先して柔軟性を持ち、教条主義を避ける</li>
        </ul>

        <p>これらの原則を念頭に置いて、存在するモデリングの種類とそれらが使用される場所を高レベルで見てみましょう。以下は、モデリングの概念とその実装の紹介を意図しているので、詳細や用語について心配する必要はありません。これらすべては後の章で詳しく説明されます。</p>

        <h2>概念モデリング</h2>

        <p>モデリングは、データベースやデータが登場するずっと前から始まります。それはビジネス自体から始まります。概念図は、組織の運用モデルを説明するのと同様に、そのデータベースランドスケープの基礎を築くのにも有効であるべきです。</p>

        <h3>概念モデリングとは何か</h3>

        <p>概念モデリングは、ビジネスオペレーションの動く部分、つまりエンティティを識別し、視覚的にマッピングするプロセスです。さらに進む前に、エンティティとは何かを確立しましょう。</p>

        <div class="box">
            <p><strong>エンティティ</strong>：組織が情報を維持したいと考えているビジネスに関連する人、オブジェクト、場所、イベント、または概念。多くの企業に共通するエンティティの例には、従業員、顧客、販売、アイテムなどがあります。エンティティは通常単数形で参照され、オブジェクトのクラスまたはタイプを表します（これと単数形対複数形の命名に関する議論については第10章「データベースの命名と構造」で詳しく説明します）。エンティティインスタンスは、そのようなクラスまたはタイプの発生です：</p>
            <p>スーパーマンはSUPERHEROエンティティ内のインスタンスです</p>
        </div>

        <p>概念モデリングは、ビジネスチームとデータチームの間の協働的な発見プロセスであり、視覚的なプロジェクト成果物を生み出します。エンティティに関するデータを収集して保存する前に、エンティティ自体を発見し、合意する必要があります。概念モデリングの目標は、運用チームとデータチーム間のビジネスと技術的理解の統合です。図は副産物です。概念モデリングサービスで行われる会話は、組織を前進させ、設計と分析のさらなる段階で価値を追加します。</p>

        <p>ビジネスチームはモデル設計に精通していない可能性が高いため、データチームと協力することで初めてそのような観点で考えることを強制される可能性があります。予備的な概念設計が最初に起草されたとき、ビジネスチームは普遍的に共有されていない現実に直面する可能性があります。これは良いことです。ビジネスプロセスが最初に具体的で曖昧さのない図に記載されると、個人が無意識に持っている不整合が明らかになり、真実に収束することができます。</p>

        <p>例えば、私たちはレストランで人々に食事を提供するビジネスをしているのでしょうか、それともレストランのキッチンに食材を卸売りするビジネスをしているのでしょうか？もしそうなら、電話、ウェブ、モバイル営業部隊、またはそのすべてによってでしょうか？データチームが孤立して確実に知ることは不可能です。</p>

        <p>ドメインエキスパートがエンティティを確立したら、分析を拡大してプロパティと関係を発見します。プロパティまたは属性は、エンティティに関連する説明的な情報です：</p>

        <div class="box">
            <p>SuperheroエンティティにはBirthplace属性があり、SupermanインスタンスにはKryptonという値があります</p>
        </div>

        <p>顧客には名前、住所、身長、運転免許証があるかもしれませんが、これらのうちどれが私たちのレストランビジネスに関連しているでしょうか？含まれていない他の関連するプロパティはありますか？ビジネスチームがこの情報を確認できます。</p>

        <p>最後に、関係と呼ばれるエンティティ間の相互作用があります。関係は、is、has、attendsなどの動詞句として表現されます。関係名は、図の関係線にラベル付けされます：</p>

        <div class="box">
            <p>SUPERHERO has a SUPER_POWER</p>
        </div>

        <p>コミックオタクは、スーパーヒーローのクラスには4つのタイプがあることを知っています：エイリアンの救世主、テクノロジーソルジャー、科学事故の生存者、そして自警団員。スーパーマンは、クリプトンの赤い太陽の下で生まれ、最初の種類であるエイリアンの救世主です。これまでのところ、2つのエンティティ（SUPERHEROとSUPERHERO_TYPE）と関係（SUPERHERO has a SUPERHERO_TYPE）があります。ビジネスチームは、エンティティと共有する関係の両方の粒度を確認する必要があります：</p>

        <ul>
            <li><strong>エンティティの粒度</strong>：エンティティの単一のインスタンスが表すもの。
                <ul>
                    <li>SUPERHEROエンティティは、個々のヒーローの粒度で維持されます。SUPERHEROの単一の行は、1人の固有のヒーローとその属性を表します。</li>
                    <li>SUPERHERO_POWERエンティティは、ヒーローのスーパーパワーの粒度で維持されます。SUPERHERO_POWERの単一の行は、スーパーヒーローが持つことができる多くのパワーのうちの1つだけを表します。</li>
                </ul>
            </li>
            <li><strong>関係の粒度</strong>：エンティティ間の粒度。これは、カーディナリティとオプショナリティの2つの部分で構成されます：
                <ul>
                    <li><strong>カーディナリティ</strong>：2つのエンティティが共有できる最大インスタンス数。これは1つまたは多数のいずれかです：
                        <ul>
                            <li>SUPERHEROには1つのSUPERHERO_TYPEがあります</li>
                            <li>SUPERHEROは1つ以上のSUPERHERO_POWERを持つことができます</li>
                        </ul>
                    </li>
                    <li><strong>オプショナリティ</strong>：関係が必須かオプションかを示します（例：must、may、can）。この文脈では、「ゼロ」という単語がオプションの同義語としてよく使用されます（例：「オプションの多対多」の代わりに「ゼロから多」）が、カーディナリティと混同しないでください。関連する命名法と記法の詳細については、第6章「モデリング記法を通してSnowflakeのアーキテクチャを見る」で提供されます：
                        <ul>
                            <li>SUPERHEROは必ずSUPERHERO_TYPEを持たなければなりません</li>
                            <li>SUPERHEROはSUPERHERO_POWERを持つかもしれませんし、持たないかもしれません</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>

        <p>粒度を説明するとき、このすべての情報は1つの用語に凝縮されます。ビジネスチームがスーパーヒーローは前述の4つのタイプのいずれかに分類されなければならず、多くのスーパーパワーを持つことも、持たないこともできることを確認したとします。その場合、エンティティ間の関係を次のように説明できます：</p>

        <ul>
            <li>SUPERHEROは1つだけのSUPERHERO_TYPEを持たなければなりません</li>
            <li>SUPERHEROはゼロまたは1つ以上のSUPERHERO_POWERを持つことができます</li>
        </ul>

        <p>この原始的な例でも、言葉のサラダは飲み込みにくくなっています。しかし、この情報を正確に保存するためにSnowflakeでテーブルを作成する場合、これらのニュアンスを体系的にキャプチャできる必要があり、図はそのための理想的な方法です。</p>

        <h3>概念モデリングの見た目</h3>

        <p>概念モデルを、それが含むべきでないものによって定義する方が、含むものによって定義するよりも簡単です。展開可能であるために厳密なデータベース固有の精度を持たなければならない物理モデルとは異なり、概念モデルには、高レベルでモデルの詳細を表示および理解するために必要なだけの詳細が含まれます。</p>

        <p>最低限、概念モデルはエンティティとその関係を描写する必要があります。それ以外に、属性、粒度、さらにはいくつかの論理的機能などの詳細が含まれる場合があります。以下は、前のセクションで説明したスーパーヒーローモデルの2つの例です。</p>

        <p>最高レベルの抽象化でも、概念モデリングはユースケースのニーズに合わせて詳細とプレゼンテーションに柔軟性があります。ここでは、開発プロセスの発見フェーズ中に表示される可能性があるように、最低解像度でモデルを見ています。エンティティと関係のみを示しています：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_03.jpg" alt="図2.3 – 概念的なエンティティ関係（ER）モデリング" style="max-width: 100%; height: auto;">
            <figcaption>図2.3 – 概念的なエンティティ関係（ER）モデリング</figcaption>
        </figure>

        <p>同じ設計に説明を追加して、問題のドメインに精通していない読者に追加のコンテキストを提供できます：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_04.jpg" alt="図2.4 – 説明付きの概念的ERモデリング" style="max-width: 100%; height: auto;">
            <figcaption>図2.4 – 説明付きの概念的ERモデリング</figcaption>
        </figure>

        <p>この初期段階では、データ型や詳細な属性などの詳細は必要ありません。たとえば、住所属性をリストし、後で通り、市、郵便番号などの構成要素に展開することで十分かもしれません：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_05.jpg" alt="図2.5 – 属性とカーディナリティを持つ概念的ERモデリング" style="max-width: 100%; height: auto;">
            <figcaption>図2.5 – 属性とカーディナリティを持つ概念的ERモデリング</figcaption>
        </figure>

        <p>概念モデルは、展開後もずっと有用です。新しい従業員は概念モデルを使用して、ビジネスモデルにすばやく慣れることができます。ビジネスユーザーも同様に、概念モデルのシンプルさに依存して、隣接するドメインを探索し、自分が精通しているドメインとどのように相互作用するかを理解できます。</p>

        <p>概念モデリングは、新しい設計を計画するためのモックアップを作成するためにも使用されます。ホワイトボードのように、概念モデルは初期段階のアイデアをキャプチャし、変更や詳細が導入されるにつれて進化させることができます。ホワイトボードとは異なり、概念モデルは、コラボレーティブモデリングツールでオンラインで維持される場合、チームメンバーと簡単に変更および共有できます。</p>

        <p>概念モデルの使用方法と見た目を理解したので、次のモデリングフェーズである論理モデリングに進みましょう。</p>

        <h2>論理モデリング</h2>

        <p>概念モデリングを通じてビジネスモデルの構成要素（エンティティ、属性、関係）が特定されたら、論理モデリングが始まります。ただし、論理設計と概念設計で使用される要素の間に厳密な区別はありません。実際、多くのデータベース設計の教科書は、この2つを区別せず、単一のスタイルに結合し、単一のステップで取り組みます。</p>

        <p>本書は異なるアプローチを取ります。要素やその記法ではなく、設計プロセスの自然な流れのために、概念モデリングと論理モデリングを区別します。データベースの教科書は技術的な読者向けに作られているため、多くはデータベースモデリングの技術的でない参加者であるビジネスユーザーを見失います。</p>

        <p>論理モデルは概念モデルが表現できるすべてを表現できますが、技術的な詳細も多く含まれており、それを理解する基盤を欠くチームメンバーを疎外する可能性があります。初期段階では、技術的な詳細よりもドメイン知識が重要なので、聴衆に応じて2つのモデリングスタイル間を行き来することが役立つかもしれません。</p>

        <p>紙やホワイトボードとは異なり、モデリングツールを使用すると、基礎となるオブジェクトに影響を与えることなく、異なるモデリングスタイルと記法の間をシームレスに切り替えることができ、聴衆に応じて適切な抽象化レベルを選択できます。</p>

        <p>これが実際に何を意味するか理解してみましょう。</p>

        <h3>論理モデリングとは何か</h3>

        <p>論理モデリングは、ビジネスの概念的な運用モデルとデータベースの物理構造の間の橋です。論理モデリングは、概念モデルや物理モデルが表現できる以上のデータの性質に文脈を与える慣習を使用します。</p>

        <p>論理モデリングは、関係メタデータを記述する記法を追加することで概念を拡張し、データ型やキーなどの物理データベース設計の要素を組み込みます。サブタイプやスーパータイプなどの論理的概念は、プログラミングの背景を持つ人にはすでに馴染みがあるかもしれませんが、ビジネスユーザーには難解に見えるかもしれません。</p>

        <p>論理モデリングフェーズでは、データ型やキーなどのデータベース実装に必要な技術的詳細も導入されますが、簡略化された形式で行われます。論理モデリングを物理モデリングから分離するのは、技術的詳細が特定のデータベースタイプに固有ではないことです。</p>

        <p>物理的領域と概念的領域の間に位置することで、論理モデリングは両方の世界を橋渡しし、純粋なデータベースオブジェクトの硬直性では失われるニュアンスを表現できます。</p>

        <p>つまり、論理モデリングは、既存の（またはまもなく存在する）物理的なランドスケープに密接に似たモデルの上にビジネスのニュアンスを確認するのに役立ちます。</p>

        <p>そのような図で見つけることが期待できる論理のみの要素のいくつかを見てみましょう。</p>

        <h3>論理モデリングの見た目</h3>

        <p>論理モデリングフェーズには、データ型、一意の識別子、関係などの詳細が含まれます。サブタイプとスーパータイプ、および多対多の関係のコンテキスト記法も含まれます。</p>

        <p>サブタイプは、継承を表すために論理図で使用されます。スーパーヒーローの例では、SUPERHERO_TYPEを使用して、SUPERHEROスーパータイプに基づいてサブタイプテーブルを作成できます。このようにして、SUPERHERO_NAMEなどの共通属性を共有でき、各サブタイプに固有の属性（エイリアン救世主タイプのヒーローのIS_HUMANOIDインジケータなど）は、それぞれのサブタイプテーブルで維持できます。</p>

        <p>完全（二重平行線）かつ排他的（中央の文字X）なサブタイプ関係は次のようになります：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_06.jpg" alt="図2.6 – 論理的なサブタイプ/スーパータイプの関係" style="max-width: 100%; height: auto;">
            <figcaption>図2.6 – 論理的なサブタイプ/スーパータイプの関係</figcaption>
        </figure>

        <p>多対多の関係（M:M）は、論理モデルに固有の課題を提示します。スーパーヒーローの例では、スーパーヒーローは多くのパワーを持つかもしれない（または、バットマンのように、なし）ことを確立しました。また、スーパーパワー（たとえば、飛行）は、多くのスーパーヒーローによって共有される可能性があります（または、パワーが耳を見えなくすることである場合は誰も持たない）。つまり、多くのスーパーヒーローと多くのスーパーパワーです。問題は、物理データベースでは、両方のテーブルでデータを複製することなく、この情報を保存する方法がないことです：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_07.jpg" alt="図2.7 – 2つのテーブル間の論理的なM:M関係" style="max-width: 100%; height: auto;">
            <figcaption>図2.7 – 2つのテーブル間の論理的なM:M関係</figcaption>
        </figure>

        <p>物理データベースでM:M関係を表すには、中間の連想テーブルが必要です。論理設計ではテーブル間のM:M関係が許可されていますが、2つのテーブルを使用して3つの存在を意味することで、この章の前半で概説した最初の2つのモデリング原則に違反します。</p>

        <p>このような混乱を避けるために、Chen記法からダイヤモンドを借りて、M:M関係の連想テーブルにラベルを付けます：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_08.jpg" alt="図2.8 – Chenダイヤモンド記法の連想テーブルとしての論理的なM:M関係" style="max-width: 100%; height: auto;">
            <figcaption>図2.8 – Chenダイヤモンド記法の連想テーブルとしての論理的なM:M関係</figcaption>
        </figure>

        <p>ここで、M:M関係が存在し、必要な情報をキャプチャするために3番目のテーブル（独自の独立した属性を含む）が必要であることが観察者に明確になります。</p>

        <p>論理的なコンテキストが定義されたら、物理的なSnowflakeモデルの作業を開始できます。</p>

        <h2>物理モデリング</h2>

        <p>第1章「モデリングの力を解き放つ」では、「モデル」という言葉の多くの意味と応用を分離し、それがデータベーステーブルの物理構造と付随する視覚的な図にどのように使用されるかに注目しました。物理モデルには、特定のデータベース（例：Snowflake）に設計を構築および展開するために必要なすべての情報が含まれています。</p>

        <p>これは逆方向にも機能します。多くのモデリングツールとSQL統合開発環境（IDE）は、データベースのデータ定義言語（DDL）から直接図をリバースエンジニアリングできます。リバースエンジニアリングにより、ユーザーは基礎となるスキーマの視覚的表現をその場で生成し、関係を探索するのに役立ちます。</p>

        <p>この変換はどのように機能するのでしょうか？</p>

        <h3>物理モデリングとは何か</h3>

        <p>物理モデルは、Snowflakeにデータベースを展開するためのブループリントであり、ユーザーがナビゲートするのに役立つ技術的および運用上のリンクを保持するマップです。</p>

        <p>論理から物理モデリングへの移行は主に体系的です（関係は制約になり、データ型はデータベースの同等物に変換され、データベースプロパティが定義されます）が、いくつかの設計上の決定がまだ必要になる場合があります（例：サブタイプのロールアップ、第11章「物理モデリングを実践する」で説明）。そのような決定は、ビジネス要因と将来のデータ消費パターンに依存します。</p>

        <p>一部のモデリングツールは、論理モデルと物理モデルを異なるプロジェクトに分離します。SqlDBMなどの他のツールは、概念モデル、論理モデル、物理モデルを同期させ、ユーザーが変換なしで任意の詳細レベルでモデルを表示できるようにします。</p>

        <div class="box">
            <h3>論理データ型とSnowflake変換</h3>
            <p>他のデータベースプラットフォームからの移行を容易にするために、Snowflakeは独自のデータ型の同義語としてさまざまな互換性のあるデータ型を提供しています。たとえば、列をSTRINGまたはTEXTとして定義することは許可されていますが、列はSnowflake標準のVARCHAR(16777216)として作成されます。これは、論理モデルでよく使用されるSTRINGやINTEGERなどの汎用データ型を使用でき、展開時にSnowflakeの同等物を自動的に生成できることを意味します。詳細については、https://docs.snowflake.com/en/sql-reference/intro-summary-data-types.html をご覧ください。</p>
        </div>

        <p>物理モデリングは、Snowflake展開前の最終ステップです。図にはデータ型と制約が表示されますが、このフェーズの一部としてオブジェクト内に埋め込まれる詳細ははるかに多くあります。クラスタリングキー、テーブルタイプ、およびアイデンティティプロパティが必要に応じて設定され、シーケンスやファイル形式などのサポートオブジェクトも作成および割り当てられます。これらすべては新しい開発中に発生しますが、物理モデリングは既存のスキーマにも使用されます。</p>

        <p>正式なモデルドキュメントがないデータベースを持つ組織にとって、物理モデリング（リバースエンジニアリングを通じて）は、それを作成する最も直接的な方法です。多くのモデリングツールは、命名パターンを検出することで、制約が定義されていないスキーマでも関係を提案できます。これには論理モデルのメタコンテキストが欠けていますが、図がまったくないよりもはるかに優れています。</p>

        <h3>ビューはどうでしょうか？</h3>

        <p>これまで、ビジネスモデルと並行してデータベースモデリングを探求してきました。ビジネスクリティカルな情報をエンティティ、属性、関係としてキャプチャおよび保存します。ただし、ビューはデータベースオブジェクトとして保存されたSELECTステートメントであるため、データを保存しません。基礎となるCUSTOMERテーブルなしでトランザクションデータベースでCUSTOMERエンティティをビューとして構築することは不可能かもしれませんが、データウェアハウスはビューを使用して複数のCUSTOMERソースを1つのディメンションに論理的に統合する場合があります。そのようなシナリオでは、ビューはCUSTOMERモデルの一部ではないでしょうか？もちろんそうであり、物理モデルに表示されるべきです。</p>

        <p>ただし、そのようなビューによって使用されるモデルは、物理的ではなく変換的であり、対応するセクションでカバーされます。「論理的」という言葉がすでにモデリングのクラスに取られており、ビューやCREATE TABLE AS SELECT（CTAS）テーブルなどのロジックベースの変換を表現するために使用できないのは残念です。ああ、「同じ慣習に2つの意味を与えない」という曖昧さのない原則に従わなければならないので、それだけです。</p>

        <p>では、物理モデルは以前に議論したものとどのように視覚的に異なるのでしょうか？</p>

        <h3>物理モデリングの見た目</h3>

        <p>物理図は、論理的な対応物と著しく似ています。ただし、はるかに多くの情報が詰め込まれています。プレゼンテーションオプションはほとんどのモデリングツールで構成可能ですが、完全な列リスト、データ型、制約などの必須要素を定義する必要があります。ただし、物理モデルには、一度に表示できるよりも多くの詳細があります。図の各要素（関係、テーブル、列）は、個別に編集できる独自の物理属性のセットを保持しています。</p>

        <p>これは、物理モデルとして見られるスーパーヒーローデータベースの例です：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_09.jpg" alt="図2.9 – スーパーヒーローデータベースの物理モデル" style="max-width: 100%; height: auto;">
            <figcaption>図2.9 – スーパーヒーローデータベースの物理モデル</figcaption>
        </figure>

        <p>したがって、物理モデルは、データベースに直接変換できるプロパティのみを視聴者に提示します。前述のように、関係は技術的な資産であると同時に、ビジネスの運用上の性質への手がかりでもあります。変換モデリングを通じて風景の多くが定義されるデータウェアハウスでも、リレーショナルモデルで概説された関係は、変換を機能させるために行われる接続と結合を通知するのに役立ちます。</p>

        <h2>変換モデリング</h2>

        <p>すべてはSELECTから始まります。変換ロジックを通じたモデリングは、データをモデリングするための強力で機動性の高い方法ですが、1つの重大な欠点があります。SELECTする既存のデータが必要です。変換モデリングは、トランザクションデータベースではめったに行われません。そのようなシステムでは、データは会社の運用プロセス（購入やプロファイルの更新など）を通じて作成および変更されるため、高価な変換プロセスが重要なシステムリソースを競合すべきではありません。ただし、データウェアハウスでは、各ロードの新しいタイムスタンプで適合されたデータセットが抽出および複製される場合、変換モデリングが必要になります。</p>

        <p>変換モデリングは既存の構造化データから選択するため、結果セットはすでに構造化されています。SUPERHERO_NAMEとHAS_MASK列を選択してテーブルを作成すると、それらの構造（それぞれVARCHARとBOOLEAN）が保持されます。ただし、すべてのモデリングと同様に、変換も適切に文書化され、データベースユーザーが結果として生じる複雑なデータランドスケープを理解できるようにする必要があります。</p>

        <h3>変換モデリングとは何か</h3>

        <p>変換モデリングは、リレーショナルとは異なり、作成プロセスの一部として既存のデータを使用するため、保持することを意図したデータの構造に関心がありません。代わりに、変換モデリングは、既存のソースからデータを選択して新しいオブジェクトを作成します。これは、CREATE TABLE AS SELECT（CTAS）コマンドを使用したビュー、または他のDMLステートメントを通じて行われます。</p>

        <p>しかし、変換モデリングにはそれ以上のものがあります。それは、そのようなテーブルのデータを最新の状態に保つために使用されるMERGEとバルクINSERTでもあります。データに関して、オンライントランザクション処理（OLTP）データベースは通常、真実の単一のソース（最新）のみを保持します。しかし、オンライン分析処理（OLAP）システムは、設計上、最新のデータから切断されており、スケジュールに従ってロードおよび同期する必要があります。変換アプローチは、最新の変更を表示するために使用されます。</p>

        <p>OLTPデータベースは、一般的に運用ユースケース（販売、予約、アプリケーションデータなど）で使用され、個々のレコードの作成、読み取り、更新、削除（CRUD）で動作します。対照的に、ウェアハウスは変換モデリングに依存して、異なるソースからのデータを統合し、さまざまな詳細レベルと集計で適合されたデータのバージョンを作成します。</p>

        <p>変換ロジックは、ビジュアライゼーションを構築し、情報を要約するときに、ビジネスインテリジェンス（BI）およびダッシュボードツールによっても使用されます。そのようなツールは、データがテーブルやチャートの形で画面に引き出されるときに必要な結合と集計を実行することで、クエリを記述する作業を自動化します。</p>

        <p>変換はコードとして表現されるため、変換モデリングで何を視覚化できるでしょうか？</p>

        <h3>変換モデリングの見た目</h3>

        <p>データベースロジックの複雑さに対する最良の抽象化は、それを生成したSQLです。その核心において、変換ロジックはSQLです。テーブルを作成および設定するCTASステートメントですが、それを更新するために使用される可能性のあるINSERTまたはMERGEステートメント、またはこれらのステートメントがそれを行うために呼び出す可能性のあるVIEWでもあります。</p>

        <p>ただし、リバースエンジニアリングDDLがDDLからER図を生成できるのと同様に、変換SQLロジックから系統図を生成することもできます。リレーショナル図とは異なり、系統グラフはSELECTステートメントでソースからターゲットへのデータフローの低解像度の描写です。付随するSQLがなければ、テーブルの作成につながった詳細は失われます：</p>

        <figure>
            <img src="../images/chapter2/B19467_02_10.jpg" alt="図2.10 – コードとして、および系統図で表現された変換モデリング" style="max-width: 100%; height: auto;">
            <figcaption>図2.10 – コードとして、および系統図で表現された変換モデリング</figcaption>
        </figure>

        <p>他のモデリング図とは異なり、写真がDDLよりも明確なストーリーを語る場合、変換モデリングは系統グラフと一緒にコードを表示することから恩恵を受けます。これにより、ユーザーは変換の入力と出力を高レベルで理解してから、選択した場合はロジックの詳細に飛び込むことができます。</p>

        <p>概要、例、ユースケースで4つの異なるモデリングスタイルをカバーした後、学んだことを確認しましょう。</p>

        <h2>まとめ</h2>

        <p>この章全体で見てきたように、モデリングは、データベース設計を合意、計画、開発するために使用されるプロセスであり、基礎となるビジネスコンテキストへのより深い洞察を得るためにそれをナビゲートおよび探索する手段です。新しいプロジェクトはすべて、正式に認識されているかどうかにかかわらず、4つのモデリング段階を通過する必要があります。しかし、適切に文書化されていない既存のデータベースでも、リバースエンジニアリングは、データベースからそのビジネスの意味を明らかにするために逆方向に作業する効果的なメカニズムです。</p>

        <p>設計の旅は概念モデリングから始まります。これは、ビジネスとデータチームが協力して、ビジネスオペレーションを支える核心要素とそれらがどのように相互作用するかを理解する協働プロセスです。概念モデルは、詳細よりもシンプルさを優先し、あらゆる背景のチームメンバーがアクセスできるようにし、会話をビジネスモデルの共通理解に収束させるのに役立ちます。</p>

        <p>概念モデリングの後、データチームは論理モデリング要素を使用して図にさらなるビジネスコンテキストを追加できます。論理モデルは物理設計に似ていますが、多対多の関係、サブタイプクラス、関係名などのビジネスのニュアンスを提供します。これらはいずれもデータベースで表現できません。これにより、論理モデルは物理モデリングへの移行の理想的な橋となります。</p>

        <p>物理モデリングは、ビジネスルールが正しくキャプチャされ、効率的なパフォーマンスを確保するための適切なパラメーターでキャプチャされるようにするデータベース固有の詳細に関係します。エンティティ、属性、関係は概念的および論理的なコラボレーションを通じてすでに確定されているため、データベース固有のプロパティが定義される物理的なデータベースの詳細に焦点を当てることができます。</p>

        <p>変換モデリングは、物理モデルを方向付けマップとして使用することから始まり、ビジネスの質問に答え、意思決定を推進するのに最適な形式（または形式）にデータを再形成します。変換モデリングは純粋にSQLロジックを通じて実行されますが、付随するビジュアル（すべてのタイプのモデリングと同様）は、複雑なロジックの理解と保守を加速するのに役立ちます。</p>

        <p>存在するモデリングのタイプとそれらが使用される場所を見たので、次のステップはそれらを適用する方法を学ぶことです。ただし、それに到達する前に、キャンバスとして使用するSnowflakeの革新的なクラウドアーキテクチャを理解する必要があります。次の章では、Snowflakeを市場で最も急速に成長しているクラウドデータベースプラットフォームにする独自の機能と、それらを使用してコストとパフォーマンスを最適化する方法に慣れ親しみます。</p>

        <h2>参考文献</h2>

        <p>技術チームとビジネスチーム間の効果的なコミュニケーションは、悪名高いほど困難です。『The Rosedata Stone』で、Steve Hobermanは、プロジェクト内のビジネス用語の正確な図を作成するためのガイドを提示します。ビジネス用語モデルは、技術的な知識のギャップを埋め、ビジネスチームに彼ら自身の用語で会うのに役立つシンプルでありながら強力なコミュニケーションツールです。</p>

        <p>Hoberman, Steve. The Rosedata Stone: Achieving a Common Business Language Using the Business Terms Model. Technics Publications, 2020.</p>
        <div class="nav-links">
            <a href="chapter1.html">← 第1章：モデリングの力を解き放つ</a>
            <a href="chapter3.html" style="float: right;">第3章：Snowflakeのアーキテクチャをマスターする →</a>
        </div>
    </div>

        <footer>
            <p>個人学習用コンテンツ | 最終更新: 2025年06月24日</p>
        </footer>
    </div>
</body>
</html>